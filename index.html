<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tsitso Mafantiri ‚Äî Music</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400;1,700&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f5f0e8;
    --surface: #ede7d8;
    --card: #e8e0cf;
    --dark: #1a1a14;
    --accent: #2e6b3e;
    --accent2: #4a9e60;
    --gold: #b8860b;
    --text: #1a1a14;
    --muted: #7a7060;
    --border: #c8bfa8;
    --white: #faf7f0;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Outfit', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Top nav strip */
  .topbar {
    background: var(--dark);
    color: var(--bg);
    padding: 0.6rem 4rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.62rem;
    letter-spacing: 0.3em;
    text-transform: uppercase;
  }

  .topbar-ticker {
    overflow: hidden;
    flex: 1;
    margin: 0 2rem;
  }

  .ticker-text {
    white-space: nowrap;
    display: inline-block;
    animation: ticker 25s linear infinite;
    color: var(--accent2);
    font-weight: 500;
  }

  @keyframes ticker {
    from { transform: translateX(100vw); }
    to { transform: translateX(-100%); }
  }

  /* Hero header */
  .hero {
    display: grid;
    grid-template-columns: 1fr 1fr;
    min-height: 90vh;
    position: relative;
  }

  .hero-left {
    background: var(--dark);
    padding: 5rem 4rem;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    position: relative;
    overflow: hidden;
  }

  .hero-left::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(ellipse at 30% 60%, rgba(46,107,62,0.3) 0%, transparent 70%);
  }

  .hero-photo-wrap {
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    overflow: hidden;
  }

  .hero-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center top;
    opacity: 0.45;
    filter: grayscale(30%) contrast(1.1);
  }

  .hero-photo-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(26,26,20,0.95) 30%, rgba(26,26,20,0.2) 100%);
  }

  .hero-text {
    position: relative;
    z-index: 2;
  }

  .hero-label {
    font-size: 0.65rem;
    letter-spacing: 0.35em;
    color: var(--accent2);
    text-transform: uppercase;
    margin-bottom: 1rem;
    font-weight: 500;
  }

  .hero-name {
    font-family: 'Playfair Display', serif;
    font-size: clamp(3rem, 6vw, 5.5rem);
    font-weight: 900;
    color: var(--white);
    line-height: 0.95;
    margin-bottom: 0.3rem;
  }

  .hero-name-sub {
    font-family: 'Playfair Display', serif;
    font-style: italic;
    font-size: clamp(1.8rem, 3.5vw, 3rem);
    color: var(--accent2);
    font-weight: 400;
    margin-bottom: 2rem;
  }

  .hero-desc {
    font-size: 0.85rem;
    color: rgba(245,240,232,0.65);
    line-height: 1.7;
    max-width: 340px;
    letter-spacing: 0.02em;
  }

  .hero-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-top: 1.5rem;
  }

  .tag {
    font-size: 0.6rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    padding: 0.35rem 0.8rem;
    border: 1px solid rgba(74,158,96,0.5);
    color: var(--accent2);
    border-radius: 100px;
  }

  /* Right side - player */
  .hero-right {
    background: var(--white);
    padding: 3rem;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    border-left: 1px solid var(--border);
  }

  .section-label {
    font-size: 0.6rem;
    letter-spacing: 0.35em;
    color: var(--accent);
    text-transform: uppercase;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.8rem;
  }

  .section-label::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  /* Player */
  .now-playing-art {
    width: 100%;
    aspect-ratio: 1;
    background: var(--surface);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
    border: 1px solid var(--border);
    max-width: 280px;
    align-self: center;
  }

  #artCanvas {
    width: 100%;
    height: 100%;
    display: block;
  }

  .now-playing-info { text-align: center; }

  .np-status {
    font-size: 0.6rem;
    letter-spacing: 0.3em;
    color: var(--accent);
    text-transform: uppercase;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  .np-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.4rem;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 0.3rem;
    color: var(--dark);
  }

  .np-sub {
    font-size: 0.7rem;
    color: var(--muted);
    letter-spacing: 0.1em;
  }

  /* Progress */
  .progress-wrap {
    height: 3px;
    background: var(--border);
    border-radius: 2px;
    cursor: pointer;
    position: relative;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 2px;
    width: 0%;
    transition: width 0.3s linear;
    position: relative;
  }

  .progress-fill::after {
    content: '';
    position: absolute;
    right: -5px;
    top: 50%;
    transform: translateY(-50%);
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--accent);
    box-shadow: 0 0 0 2px white;
  }

  .progress-times {
    display: flex;
    justify-content: space-between;
    font-size: 0.6rem;
    color: var(--muted);
    margin-top: 0.4rem;
  }

  /* Controls */
  .controls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1.2rem;
  }

  .ctrl {
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--muted);
    padding: 0.3rem;
    border-radius: 50%;
    transition: all 0.2s;
  }

  .ctrl:hover { color: var(--accent); transform: scale(1.1); }
  .ctrl.play-btn {
    width: 54px; height: 54px;
    background: var(--accent);
    color: white;
    border-radius: 50%;
    box-shadow: 0 4px 16px rgba(46,107,62,0.35);
  }
  .ctrl.play-btn:hover { background: var(--accent2); transform: scale(1.06); color: white; }
  .ctrl svg { width: 18px; height: 18px; }
  .ctrl.play-btn svg { width: 24px; height: 24px; }

  /* Volume */
  .vol-row {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .vol-row svg { width: 14px; height: 14px; color: var(--muted); flex-shrink: 0; }

  input[type=range] {
    flex: 1;
    -webkit-appearance: none;
    height: 2px;
    background: var(--border);
    border-radius: 2px;
    outline: none;
  }

  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 12px; height: 12px;
    border-radius: 50%;
    background: var(--accent);
    cursor: pointer;
  }

  /* Download btn */
  .dl-main-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.6rem;
    width: 100%;
    padding: 0.85rem;
    background: var(--accent);
    color: white;
    border: none;
    font-family: 'Outfit', sans-serif;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    cursor: pointer;
    border-radius: 3px;
    transition: all 0.2s;
    box-shadow: 0 2px 10px rgba(46,107,62,0.25);
  }

  .dl-main-btn:hover { background: var(--accent2); transform: translateY(-1px); box-shadow: 0 4px 16px rgba(46,107,62,0.35); }
  .dl-main-btn svg { width: 15px; height: 15px; }

  /* Tracklist section */
  .tracklist-section {
    padding: 4rem;
    background: var(--bg);
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2.5rem;
  }

  .section-title {
    font-family: 'Playfair Display', serif;
    font-size: 2rem;
    font-weight: 700;
    color: var(--dark);
  }

  .track-count {
    font-size: 0.7rem;
    color: var(--muted);
    letter-spacing: 0.2em;
    text-transform: uppercase;
  }

  /* Tracks grid */
  .tracks-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 0;
    border: 1px solid var(--border);
    border-radius: 4px;
    overflow: hidden;
    background: var(--white);
  }

  .track-row {
    display: grid;
    grid-template-columns: 3rem 1fr auto;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    transition: background 0.2s;
    position: relative;
  }

  .track-row:last-child { border-bottom: none; }
  .track-row:hover { background: var(--surface); }
  .track-row.active { background: rgba(46,107,62,0.08); }
  .track-row.active .track-num { color: var(--accent); }
  .track-row.active .track-title { color: var(--accent); }

  .track-num {
    font-size: 0.75rem;
    color: var(--muted);
    font-weight: 500;
    text-align: right;
    font-family: 'Playfair Display', serif;
  }

  .track-info { min-width: 0; }

  .track-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.05rem;
    font-weight: 700;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: color 0.2s;
  }

  .track-meta {
    font-size: 0.62rem;
    color: var(--muted);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    margin-top: 0.15rem;
  }

  .track-right {
    display: flex;
    align-items: center;
    gap: 0.6rem;
    flex-shrink: 0;
  }

  .track-dur {
    font-size: 0.65rem;
    color: var(--muted);
    font-weight: 500;
    width: 2.5rem;
    text-align: right;
  }

  .icon-btn {
    width: 30px; height: 30px;
    border-radius: 50%;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--muted);
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
  }

  .icon-btn:hover { border-color: var(--accent); color: var(--accent); background: rgba(46,107,62,0.08); }
  .icon-btn svg { width: 12px; height: 12px; }

  /* Playing animation */
  .bars { display: flex; align-items: flex-end; gap: 2px; height: 14px; }
  .bar { width: 3px; background: var(--accent); border-radius: 1px; animation: pulse 0.7s ease infinite; }
  .bar:nth-child(2) { animation-delay: 0.15s; }
  .bar:nth-child(3) { animation-delay: 0.3s; }
  @keyframes pulse { 0%,100%{height:3px} 50%{height:14px} }
  .bars.paused .bar { animation-play-state: paused; }

  /* About section */
  .about-section {
    padding: 4rem;
    background: var(--dark);
    color: var(--bg);
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 4rem;
    align-items: center;
  }

  .about-img-wrap {
    aspect-ratio: 3/4;
    overflow: hidden;
    border-radius: 4px;
    position: relative;
  }

  .about-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center top;
    filter: grayscale(20%) contrast(1.05);
  }

  .about-img-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(26,26,20,0.5) 0%, transparent 60%);
  }

  .about-tag {
    font-size: 0.6rem;
    letter-spacing: 0.35em;
    color: var(--accent2);
    text-transform: uppercase;
    font-weight: 600;
    margin-bottom: 1.2rem;
  }

  .about-title {
    font-family: 'Playfair Display', serif;
    font-size: 2.8rem;
    font-weight: 900;
    line-height: 1.05;
    color: var(--white);
    margin-bottom: 1.5rem;
  }

  .about-title em { font-style: italic; color: var(--accent2); }

  .about-text {
    font-size: 0.9rem;
    line-height: 1.8;
    color: rgba(245,240,232,0.7);
    margin-bottom: 1rem;
  }

  /* Footer */
  footer {
    background: var(--dark);
    border-top: 1px solid rgba(255,255,255,0.08);
    padding: 1.5rem 4rem;
    display: flex;
    justify-content: space-between;
    font-size: 0.62rem;
    color: rgba(245,240,232,0.4);
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }

  footer a { color: var(--accent2); text-decoration: none; }

  /* Responsive */
  @media (max-width: 900px) {
    .hero { grid-template-columns: 1fr; }
    .hero-left { min-height: 60vh; }
    .hero-right { padding: 2rem; }
    .about-section { grid-template-columns: 1fr; padding: 2.5rem; }
    .tracklist-section { padding: 2rem; }
    .topbar, footer { padding: 0.6rem 1.5rem; }
    .tracks-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="topbar">
  <span>Lesotho</span>
  <div class="topbar-ticker">
    <span class="ticker-text">‚ú¶ Mapping the Mountain Kingdom ‚ú¶ Lesotho Goes Green ‚ú¶ Guard the Land, Guard the Future ‚ú¶ Free Music ‚Äî Download &amp; Share ‚ú¶ Mountains Remember ‚ú¶ The Lament of Maluti ‚ú¶</span>
  </div>
  <span>Free Downloads</span>
</div>

<div class="hero">
  <div class="hero-left">
    <div class="hero-photo-wrap">
      <img class="hero-photo" id="heroPhoto" src="" alt="Tsitso Mafantiri">
      <div class="hero-photo-overlay"></div>
    </div>
    <div class="hero-text">
      <div class="hero-label">Independent Artist ¬∑ Lesotho</div>
      <div class="hero-name">Tsitso</div>
      <div class="hero-name-sub">Mafantiri</div>
      <p class="hero-desc">Music rooted in the mountains, rivers, and future of Lesotho. Twelve original works ‚Äî all free to listen, share, and download.</p>
      <div class="hero-tags">
        <span class="tag">Folk</span>
        <span class="tag">Ambient</span>
        <span class="tag">Environmental</span>
        <span class="tag">Lesotho</span>
      </div>
    </div>
  </div>

  <div class="hero-right">
    <div class="section-label">Now Playing</div>

    <div class="now-playing-art">
      <canvas id="artCanvas"></canvas>
    </div>

    <div class="now-playing-info">
      <div class="np-status">‚ñ∂ Select a track to play</div>
      <div class="np-title" id="npTitle">‚Äî</div>
      <div class="np-sub" id="npSub">Tsitso Mafantiri</div>
    </div>

    <div>
      <div class="progress-wrap" id="progressWrap">
        <div class="progress-fill" id="progressFill"></div>
      </div>
      <div class="progress-times">
        <span id="curTime">0:00</span>
        <span id="totTime">0:00</span>
      </div>
    </div>

    <div class="controls">
      <button class="ctrl" id="prevBtn">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></svg>
      </button>
      <button class="ctrl play-btn" id="playBtn">
        <svg id="playIcon" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
      </button>
      <button class="ctrl" id="nextBtn">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zm2.5-6 6-4.25v8.5L8.5 12zM16 6h2v12h-2z"/></svg>
      </button>
    </div>

    <div class="vol-row">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/></svg>
      <input type="range" id="volSlider" min="0" max="1" step="0.02" value="0.8">
    </div>

    <button class="dl-main-btn" id="dlBtn">
      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
      Download This Track
    </button>
  </div>
</div>

<!-- Tracklist -->
<div class="tracklist-section">
  <div class="section-header">
    <div class="section-title">All Songs</div>
    <div class="track-count">12 Tracks ¬∑ All Free</div>
  </div>
  <div class="tracks-grid" id="tracksGrid"></div>
</div>

<!-- About -->
<div class="about-section">
  <div class="about-img-wrap">
    <img class="about-img" id="aboutPhoto" src="" alt="Tsitso Mafantiri">
    <div class="about-img-overlay"></div>
  </div>
  <div>
    <div class="about-tag">About the Artist</div>
    <div class="about-title">Songs of the<br><em>Mountain Kingdom</em></div>
    <p class="about-text">Tsitso Mafantiri is an independent artist from Lesotho whose music maps the emotional and physical landscape of the Kingdom in the Sky. His work explores environmental consciousness, cultural identity, and the deep connection between people and the Maluti Mountains.</p>
    <p class="about-text">All music is offered freely ‚Äî to listen, to share, and to download. Music belongs to the earth, just like the mountains it sings about.</p>
  </div>
</div>

<footer>
  <span>¬© Tsitso Mafantiri ‚Äî All Music Free to Share</span>
  <span>Lesotho üèîÔ∏è</span>
</footer>

<audio id="audioEl"></audio>

<script>
// ===== TRACKS =====
// Replace src with your actual MP3 file paths or URLs
const tracks = [
  { title: "Brown and Bitter",             genre: "Folk",         year: "2024", src: "songs/brown-and-bitter.mp3" },
  { title: "Guard the Land",              genre: "Acoustic",     year: "2024", src: "songs/guard-the-land.mp3" },
  { title: "Guard the Future",            genre: "Acoustic",     year: "2024", src: "songs/guard-the-future.mp3" },
  { title: "LandFill Version",            genre: "Experimental", year: "2023", src: "songs/landfill-version.mp3" },
  { title: "Landfill",                    genre: "Ambient",      year: "2023", src: "songs/landfill.mp3" },
  { title: "Lesotho Goes Green",          genre: "Folk",         year: "2023", src: "songs/lesotho-goes-green.mp3" },
  { title: "Mapping the Mountain Kingdom",genre: "Instrumental", year: "2023", src: "songs/mapping-the-mountain-kingdom.mp3" },
  { title: "Mountains Remember",          genre: "Ambient Folk", year: "2022", src: "songs/mountains-remember.mp3" },
  { title: "The Lament of Maluti",        genre: "Folk",         year: "2022", src: "songs/the-lament-of-maluti.mp3" },
  { title: "Tsitso The Mapper",           genre: "Indie",        year: "2022", src: "songs/tsitso-the-mapper.mp3" },
  { title: "We Are the Future Green",     genre: "Folk Anthem",  year: "2022", src: "songs/we-are-the-future-green.mp3" },
  { title: "When the Mountains Cry",      genre: "Ballad",       year: "2021", src: "songs/when-the-mountains-cry.mp3" },
];

// Color palette per track
const colors = ["#2e6b3e","#4a7c3f","#3a8a50","#1e5c32","#5a9e60","#2d7a48","#3d6b30","#1a6640","#4e8a5a","#2b5e38","#3f7a50","#1d5e3a"];

let curIdx = -1;
let playing = false;
const audio = document.getElementById('audioEl');

// Render track list
const grid = document.getElementById('tracksGrid');
tracks.forEach((t, i) => {
  const row = document.createElement('div');
  row.className = 'track-row';
  row.id = `row-${i}`;
  row.innerHTML = `
    <div class="track-num" id="tnum-${i}">${String(i+1).padStart(2,'0')}</div>
    <div class="track-info">
      <div class="track-title">${t.title}</div>
      <div class="track-meta">${t.genre} ¬∑ ${t.year}</div>
    </div>
    <div class="track-right">
      <button class="icon-btn play-row-btn" data-i="${i}" title="Play">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
      </button>
      <button class="icon-btn dl-row-btn" data-i="${i}" title="Download">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
      </button>
    </div>`;
  row.addEventListener('click', e => { if (!e.target.closest('.dl-row-btn')) load(i); });
  grid.appendChild(row);
});

document.querySelectorAll('.dl-row-btn').forEach(btn => {
  btn.addEventListener('click', e => { e.stopPropagation(); download(+btn.dataset.i); });
});

function load(i) {
  if (curIdx === i && playing) { toggle(); return; }
  if (curIdx >= 0) {
    document.getElementById(`row-${curIdx}`)?.classList.remove('active');
    const n = document.getElementById(`tnum-${curIdx}`);
    if (n) n.innerHTML = String(curIdx+1).padStart(2,'0');
  }
  curIdx = i;
  audio.src = tracks[i].src;
  audio.volume = +document.getElementById('volSlider').value;
  document.getElementById(`row-${i}`).classList.add('active');
  document.getElementById(`tnum-${i}`).innerHTML = `<div class="bars"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>`;
  document.getElementById('npTitle').textContent = tracks[i].title;
  document.getElementById('npSub').textContent = `Tsitso Mafantiri ¬∑ ${tracks[i].genre} ¬∑ ${tracks[i].year}`;
  document.querySelector('.np-status').textContent = '‚ñ∂ Now Playing';
  drawArt(colors[i]);
  audio.play().then(() => { playing = true; setIcon(true); }).catch(() => {});
}

function toggle() {
  if (curIdx < 0) { load(0); return; }
  if (playing) { audio.pause(); playing = false; setIcon(false); pauseBars(); }
  else { audio.play(); playing = true; setIcon(true); unpauseBars(); }
}

function setIcon(p) {
  document.getElementById('playIcon').innerHTML = p
    ? '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'
    : '<path d="M8 5v14l11-7z"/>';
}

function pauseBars() { document.querySelector(`#tnum-${curIdx} .bars`)?.classList.add('paused'); }
function unpauseBars() { document.querySelector(`#tnum-${curIdx} .bars`)?.classList.remove('paused'); }

document.getElementById('playBtn').addEventListener('click', toggle);
document.getElementById('prevBtn').addEventListener('click', () => load(curIdx > 0 ? curIdx-1 : tracks.length-1));
document.getElementById('nextBtn').addEventListener('click', () => load(curIdx < tracks.length-1 ? curIdx+1 : 0));

audio.addEventListener('timeupdate', () => {
  if (!audio.duration) return;
  const p = (audio.currentTime / audio.duration) * 100;
  document.getElementById('progressFill').style.width = p + '%';
  document.getElementById('curTime').textContent = fmt(audio.currentTime);
  document.getElementById('totTime').textContent = fmt(audio.duration);
});

audio.addEventListener('ended', () => {
  if (curIdx < tracks.length-1) load(curIdx+1);
  else { playing = false; setIcon(false); }
});

document.getElementById('progressWrap').addEventListener('click', e => {
  if (!audio.duration) return;
  const r = e.currentTarget.getBoundingClientRect();
  audio.currentTime = ((e.clientX - r.left) / r.width) * audio.duration;
});

document.getElementById('volSlider').addEventListener('input', e => { audio.volume = +e.target.value; });

document.getElementById('dlBtn').addEventListener('click', () => { if (curIdx >= 0) download(curIdx); });

function download(i) {
  window.open(tracks[i].src, '_blank');
}

function fmt(s) {
  if (!s || isNaN(s)) return '0:00';
  return `${Math.floor(s/60)}:${String(Math.floor(s%60)).padStart(2,'0')}`;
}

// ===== Album Art Generator =====
function drawArt(color) {
  const canvas = document.getElementById('artCanvas');
  const dpr = window.devicePixelRatio || 1;
  const size = canvas.offsetWidth * dpr;
  canvas.width = size; canvas.height = size;
  const ctx = canvas.getContext('2d');
  const s = size;

  // Background
  ctx.fillStyle = '#f0ece0';
  ctx.fillRect(0, 0, s, s);

  // Mountain silhouette
  ctx.beginPath();
  ctx.moveTo(0, s * 0.85);
  ctx.lineTo(s * 0.15, s * 0.45);
  ctx.lineTo(s * 0.3, s * 0.62);
  ctx.lineTo(s * 0.5, s * 0.25);
  ctx.lineTo(s * 0.65, s * 0.52);
  ctx.lineTo(s * 0.82, s * 0.38);
  ctx.lineTo(s, s * 0.6);
  ctx.lineTo(s, s);
  ctx.lineTo(0, s);
  ctx.closePath();
  ctx.fillStyle = color + 'cc';
  ctx.fill();

  // Second range
  ctx.beginPath();
  ctx.moveTo(0, s * 0.9);
  ctx.lineTo(s * 0.2, s * 0.65);
  ctx.lineTo(s * 0.4, s * 0.78);
  ctx.lineTo(s * 0.6, s * 0.58);
  ctx.lineTo(s * 0.78, s * 0.72);
  ctx.lineTo(s, s * 0.65);
  ctx.lineTo(s, s);
  ctx.lineTo(0, s);
  ctx.closePath();
  ctx.fillStyle = color + '55';
  ctx.fill();

  // Sun circle
  const grad = ctx.createRadialGradient(s*0.72, s*0.22, 0, s*0.72, s*0.22, s*0.18);
  grad.addColorStop(0, '#f4c842cc');
  grad.addColorStop(1, 'transparent');
  ctx.fillStyle = grad;
  ctx.fillRect(0, 0, s, s);

  // Track name text
  ctx.fillStyle = '#1a1a14cc';
  ctx.font = `bold ${s * 0.07}px 'Playfair Display', serif`;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'bottom';
  const name = curIdx >= 0 ? tracks[curIdx].title : 'Tsitso';
  const words = name.split(' ');
  const line1 = words.slice(0, Math.ceil(words.length/2)).join(' ');
  const line2 = words.slice(Math.ceil(words.length/2)).join(' ');
  ctx.fillText(line1, s/2, s * 0.18);
  if (line2) ctx.fillText(line2, s/2, s * 0.27);
}

// ===== Set photo =====
const PHOTO = "photo.jpg";
document.getElementById('heroPhoto').src = PHOTO;
document.getElementById('aboutPhoto').src = PHOTO;

window.addEventListener('load', () => drawArt('#2e6b3e'));
</script>
</body>
</html>
